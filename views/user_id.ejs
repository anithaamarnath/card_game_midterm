<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home Page</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/nav.css" type="text/css" />
    <link rel="stylesheet" href="/styles/form_body.css" type="text/css" />
     <link rel="stylesheet" href="/styles/body.css" type="text/css" />
    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>

  </head>

  <body>
<header>
  <% include ./partials/_header %>
</header>
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <h3>Active Games</h3> <br>
          <% const state = ['Waiting P1','Wait P2', 'Active','Inactive']%>
          <% const classes = ['alert alert-warning alert-dismissible fade show text-warning','alert alert-info alert-dismissible fade show text-info', 'alert alert-success alert-dismissible fade show text-success','alert alert-danger alert-dismissible fade show text-danger']%>
            <% for(let key in data){ %>
              <% let opponent = data[key].name1 %>
              <% if(userid == data[key].id1) {  %>
                <% opponent = data[key].name2%>
              <% } %>
              <% if(data[key].game_state_id != 4) {  %>
                <div class="p-2 <%= classes[data[key].game_state_id - 1]%> " >
                  <a class ="link" href="/match/<%= data[key].id%>">  Goofspiel vs <%= opponent %></a>
                  <%= state[data[key].game_state_id - 1] %>
                </div>
              <% } %>
            <% }; %>
      </div>
      <div class="col-md-4">

        <% const classWin = ['bg-success','bg-danger']%>
        <h3>Archived Games</h3> <br>
          <% for(let key in data){ %>
            <% let opponent = data[key].name1 %>
            <%let points_user = data[key].player2_points %>
            <%let points_opponent = data[key].player1_points %>
              <% if(userid == data[key].id1) {  %>
                <% opponent = data[key].name2 %>
                <% points_user = data[key].player1_points %>
                <% points_opponent = data[key].player2_points %>
              <% } %>
              <% if(data[key].game_state_id == 4) {  %>
                <% let result = 'WIN'%>
                <%if(points_opponent > points_user) {%>
                  <%result = 'LOSS'%>
                <%}%>
                  <div class="p-2 <%= classWin[result]%>"> Goofspiel vs <%= opponent %> - <%= result %></div>
              <% } %>
          <% }; %>

      </div>

        <div class="col-md-4 pull-right">
            <h3>Buttons</h3> <br>
            <button type="button" class="btn btn-primary btn-lg btn-block btn-sm">Goofspiel [Ranking]</button>
            <button type="button" class="btn btn-primary btn-lg btn-block btn-sm">Poker [Ranking]</button>
            <button type="button" class="btn btn-primary btn-lg btn-block btn-sm">Rummy [Ranking]</button>
            <button type="button" class="btn btn-primary btn-lg btn-block btn-sm">Solitaire [Ranking]</button>
            <button type="button" class="btn btn-primary btn-lg btn-block btn-sm">Poker [Ranking]</button>
        </div>

      </div>
    </div>

  </body>
  <script type="text/javascript" src="/scripts/app.js"></script>

</html>
